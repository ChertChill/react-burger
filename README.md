# React Burger

Интерактивное веб-приложение для создания кастомных бургеров с полной системой аутентификации, drag & drop конструктором и интеграцией с API.

## Содержание

- [Описание проекта](#описание-проекта)
- [Технологии](#технологии)
- [Структура проекта](#структура-проекта)
- [Архитектура приложения](#архитектура-приложения)
- [Установка и запуск](#установка-и-запуск)
- [Основные функции](#основные-функции)
- [API интеграция](#api-интеграция)
- [UI/UX особенности](#uiux-особенности)
- [Производительность](#производительность)
- [Планы развития](#планы-развития)
- [Контакты для связи](#контакты-для-связи)

## Описание проекта

React Burger - это полнофункциональное веб-приложение, построенное на React, которое позволяет пользователям:

- **Регистрироваться и авторизовываться** с полной системой аутентификации
- **Управлять профилем** - редактировать данные и просматривать историю
- **Просматривать каталог ингредиентов** (булки, соусы, начинки) с детальной информацией
- **Собирать собственные бургеры** путем перетаскивания ингредиентов
- **Оформлять заказы** с генерацией номера заказа и подтверждением
- **Восстанавливать пароль** через email с полным циклом восстановления
- **Наслаждаться адаптивным интерфейсом** с поддержкой различных устройств
- **Сохранять состояние** между сессиями для авторизованных пользователей

## Технологии

### Основные технологии
- **React 19.1.1** - основная библиотека для построения пользовательского интерфейса
- **TypeScript 4.9.5** - типизированный JavaScript для улучшения разработки и безопасности типов
- **CSS Modules** - для изолированной стилизации компонентов
- **@ya.praktikum/react-developer-burger-ui-components** - UI компоненты от Яндекс.Практикум

### Управление состоянием
- **Redux 5.0.1** - централизованное управление состоянием приложения
- **@reduxjs/toolkit 2.8.2** - современный инструментарий для работы с Redux
- **react-redux 9.2.0** - интеграция Redux с React
- **redux-thunk 3.1.0** - middleware для асинхронных действий

### Маршрутизация
- **react-router-dom 7.8.2** - маршрутизация и навигация в приложении

### Drag & Drop функциональность
- **react-dnd 16.0.1** - библиотека для реализации drag & drop
- **react-dnd-html5-backend 16.0.1** - HTML5 backend для react-dnd

### Валидация
- **uuid 11.1.0** - генерация уникальных идентификаторов

### Инструменты разработки
- **react-scripts 5.0.1** - скрипты для Create React App
- **web-vitals 2.1.4** - метрики производительности веб-приложений
- **@types/jest 27.5.2** - типы TypeScript для Jest
- **@types/node 16.18.126** - типы TypeScript для Node.js
- **@types/react 19.1.9** - типы TypeScript для React
- **@types/react-dom 19.1.7** - типы TypeScript для React DOM
- **@types/uuid 10.0.0** - типы TypeScript для uuid

## Структура проекта

```
src/
├── components/                     # React компоненты
│   ├── app/                        # Главный компонент приложения
│   │   ├── app.tsx                 # Основная логика приложения
│   │   └── app.module.css          # Стили главного компонента
│   ├── app-header/                 # Шапка приложения с навигацией
│   │   ├── app-header.tsx          # Компонент шапки
│   │   └── app-header.module.css
│   ├── burger-constructor/         # Конструктор бургеров
│   │   ├── burger-constructor.tsx
│   │   ├── burger-constructor.module.css
│   │   └── draggable-constructor-item.tsx
│   ├── burger-ingredients/         # Каталог ингредиентов
│   │   ├── burger-ingredients.tsx
│   │   └── burger-ingredients.module.css
│   ├── category-block/             # Блок категории ингредиентов
│   │   ├── category-block.tsx
│   │   └── category-block.module.css
│   ├── category-item/              # Элемент категории
│   │   ├── category-item.tsx
│   │   └── category-item.module.css
│   ├── ingredient-details/         # Детали ингредиента
│   │   ├── ingredient-details.tsx
│   │   └── ingredient-details.module.css
│   ├── loader/                     # Компонент загрузки
│   │   ├── loader.tsx
│   │   └── loader.module.css
│   ├── mobile-restriction/         # Ограничение для мобильных устройств
│   │   ├── mobile-restriction.tsx
│   │   └── mobile-restriction.module.css
│   ├── modal/                      # Модальные окна
│   │   ├── modal.tsx
│   │   └── modal.module.css
│   ├── modal-overlay/              # Оверлей для модальных окон
│   │   ├── modal-overlay.tsx
│   │   └── modal-overlay.module.css
│   ├── nutrition-item/             # Элемент информации о питательности
│   │   ├── nutrition-item.tsx
│   │   └── nutrition-item.module.css
│   ├── order-details/              # Детали заказа
│   │   ├── order-details.tsx
│   │   └── order-details.module.css
│   └── protected-route/            # Компонент защищенных маршрутов
│       └── protected-route.tsx
├── hooks/                          # Кастомные React хуки
│   ├── index.ts                    # Центральный экспорт хуков
│   ├── useModal.ts                 # Хук для управления модальными окнами
│   └── useForm.ts                  # Хук для управления состоянием форм
├── images/                         # Статические изображения
│   └── order-status.png            # Изображение статуса заказа
├── pages/                          # Страницы приложения
│   ├── auth/                       # Страницы аутентификации
│   │   ├── auth.module.css         # Общие стили для auth страниц
│   │   ├── forgot-password.tsx    # Восстановление пароля
│   │   ├── login.tsx               # Авторизация
│   │   ├── register.tsx            # Регистрация
│   │   └── reset-password.tsx      # Сброс пароля
│   ├── home.tsx                    # Главная страница
│   ├── ingredient-details/         # Страница деталей ингредиента
│   │   ├── ingredient-details.tsx
│   │   └── ingredient-details.module.css
│   ├── not-found/                  # Страница 404
│   │   ├── not-found.tsx
│   │   └── not-found.module.css
│   └── profile/                    # Профиль пользователя
│       ├── profile.tsx             # Главная страница профиля
│       ├── profile.module.css      # Стили профиля
│       ├── orders-history/         # История заказов
│       │   ├── orders-history.tsx
│       │   └── orders-history.module.css
│       ├── profile-info/           # Информация профиля
│       │   ├── profile-info.tsx
│       │   └── profile-info.module.css
│       └── profile-navigation/    # Навигация профиля
│           ├── profile-navigation.tsx
│           └── profile-navigation.module.css
├── services/                       # Redux логика
│   ├── actions/                    # Redux actions
│   │   ├── action-types.js         # Типы действий
│   │   ├── auth-actions.js         # Действия аутентификации
│   │   ├── constructor-actions.js
│   │   ├── ingredient-details-actions.js
│   │   ├── ingredients-actions.js
│   │   ├── order-actions.js
│   │   └── index.js                # Центральный экспорт actions
│   ├── reducers/                   # Redux reducers
│   │   ├── auth-reducer.js         # Reducer аутентификации
│   │   ├── constructor-reducer.js
│   │   ├── ingredient-details-reducer.js
│   │   ├── ingredients-reducer.js
│   │   ├── order-reducer.js
│   │   └── root-reducer.js         # Корневой reducer
│   └── store/                      # Redux store
│       └── store.js                # Конфигурация store
├── utils/                          # Утилиты и константы
│   ├── api.ts                      # API функции
│   ├── checkResponse.ts            # Утилита для проверки ответов API
│   ├── constants.ts                # Константы приложения
│   ├── getErrorText.ts             # Утилита для обработки ошибок
│   ├── tokenUtils.ts               # Утилиты для работы с токенами
│   └── types.ts                    # TypeScript типы и интерфейсы
├── index.css                       # Глобальные стили
├── index.tsx                       # Точка входа приложения
├── react-app-env.d.ts              # TypeScript декларации
├── reportWebVitals.ts              # Метрики производительности
└── setupTests.ts                   # Настройка тестов
```

## Архитектура приложения

### TypeScript типизация
Приложение полностью типизировано с использованием TypeScript:

- **Строгая типизация** - все компоненты, функции и данные имеют четкие типы
- **Интерфейсы** - определены интерфейсы для всех основных структур данных
- **Utility Types** - используются TypeScript utility types для комбинирования типов
- **Generic типы** - применяются generic типы для переиспользуемых компонентов
- **Типы Redux** - полная типизация состояния Redux store и actions
- **API типы** - типизированы все API запросы и ответы
- **Компонентные типы** - определены типы для всех React компонентов и их пропсов

### Redux Store Structure
Приложение использует Redux для управления состоянием с пятью основными slice'ами:

- **ingredients** - управление данными об ингредиентах с типизацией `IIngredientsState`
- **constructor** - управление состоянием конструктора бургера с типизацией `IConstructorState`
- **ingredientDetails** - управление деталями ингредиента в модальном окне с типизацией `IIngredientDetailsState`
- **order** - управление состоянием заказа с типизацией `IOrderState`
- **auth** - управление состоянием аутентификации пользователя с типизацией `IAuthState`

### Система аутентификации
- **JWT токены** - access и refresh токены для безопасной аутентификации с типизацией `ITokens`
- **Автоматическое обновление токенов** - refresh токен обновляется автоматически
- **Защищенные маршруты** - компонент ProtectedRoute для контроля доступа с типизацией `IProtectedRouteProps`
- **Персистентность сессии** - сохранение состояния авторизации в localStorage
- **Восстановление пароля** - полный цикл восстановления пароля через email с типизацией `IResetPasswordRequest`
- **Типизированные утилиты** - все утилиты для работы с токенами имеют строгую типизацию

### Маршрутизация
- **React Router v7** - современная система маршрутизации
- **Вложенные маршруты** - для профиля пользователя и деталей ингредиентов
- **Программная навигация** - с сохранением состояния для возврата после авторизации
- **Защищенные маршруты** - автоматические редиректы для неавторизованных пользователей
- **Типизированная навигация** - все навигационные функции имеют типизацию

### Кастомные хуки
- **useModal** - хук для управления модальными окнами с оптимизированными функциями и типизацией `IUseModalReturn`
- **useForm** - хук для управления состоянием форм с валидацией и сбросом с типизацией `TUseFormReturn`

### Drag & Drop система
Реализована с помощью react-dnd с полной типизацией:
- **Drag источники** в компонентах ингредиентов для перетаскивания с типизацией `IDragItem`
- **Drop зоны** в конструкторе бургера для размещения ингредиентов
- **Раздельная обработка** для булок и начинок с разными типами drop
- **Переупорядочивание** ингредиентов внутри конструктора
- **Визуальная обратная связь** при перетаскивании
- **Сохранение состояния** конструктора для авторизованных пользователей
- **Типизированные результаты** - все результаты drag & drop операций типизированы как `IDropResult`

### Компонентная архитектура
- **Функциональные компоненты** - все компоненты написаны как функциональные с использованием хуков
- **TypeScript интерфейсы** - все пропсы компонентов типизированы через интерфейсы
- **Переиспользуемые компоненты** - компоненты спроектированы для максимального переиспользования
- **Строгая типизация пропсов** - все компоненты имеют четко определенные типы пропсов

## Установка и запуск

### Предварительные требования

- Node.js (версия 14 или выше)
- npm или yarn

### Установка зависимостей

```bash
npm install
```

### Запуск в режиме разработки

```bash
npm start
```

Приложение будет доступно по адресу [http://localhost:3000](http://localhost:3000)

### Сборка для продакшена

```bash
npm run build
```

## Основные функции

### 1. Система аутентификации
- **Регистрация пользователей** - создание нового аккаунта с валидацией данных и типизацией `TWithEmailPasswordAndName`
- **Авторизация** - вход в систему с проверкой учетных данных и типизацией `TWithEmailAndPassword`
- **Восстановление пароля** - полный цикл восстановления через email с токенами и типизацией `IResetPasswordRequest`
- **Автоматическое обновление токенов** - seamless обновление access токенов через refresh токен с типизацией `ITokenResponse`
- **Защищенные маршруты** - автоматические редиректы для неавторизованных пользователей с типизацией `IProtectedRouteProps`
- **Персистентность сессии** - сохранение состояния авторизации между сессиями
- **JWT токены** - безопасная аутентификация с access и refresh токенами с типизацией `ITokens`
- **Автоматическая очистка** - удаление данных при выходе из системы
- **Типизированные утилиты** - все операции с токенами имеют строгую типизацию через `IAuthUtils`

### 2. Профиль пользователя
- **Управление данными профиля** - редактирование имени, email и пароля с типизацией `IProfileFormData`
- **История заказов** - просмотр предыдущих заказов (в разработке)
- **Навигация профиля** - удобная навигация между разделами профиля с типизацией `TIsLinkActiveFunction`
- **Валидация форм** - проверка корректности вводимых данных с типизацией `TFormChangeHandler`
- **Автосохранение изменений** - отслеживание изменений в профиле
- **Типизированные обработчики** - все функции профиля имеют строгую типизацию

### 3. Каталог ингредиентов
- **Отображение по категориям**: булки, соусы, начинки с типизацией `TIngredientType`
- **Интерактивные табы**: быстрая навигация между категориями
- **Автоматическое переключение**: активный таб меняется при скролле
- **Плавная прокрутка**: к выбранной категории при клике на таб с типизацией `ICategoryRefs`
- **Модальные окна**: детальная информация об ингредиентах с типизацией `IModalProps`
- **Drag источники**: возможность перетаскивания ингредиентов с типизацией `IDragItem`
- **Страница деталей**: отдельная страница для каждого ингредиента
- **Типизированные компоненты** - все компоненты каталога имеют строгую типизацию через `ICategoryBlockProps` и `ICategoryItemProps`

### 4. Конструктор бургеров
- **Drag & Drop функциональность**: добавление ингредиентов перетаскиванием с типизацией `IDragItem` и `IDropResult`
- **Визуальное отображение**: собранный бургер в реальном времени
- **Автоматический расчет стоимости**: обновление цены при изменении состава
- **Управление ингредиентами**: удаление отдельных элементов с типизацией `TRemoveItemHandler`
- **Переупорядочивание**: изменение порядка ингредиентов внутри конструктора
- **Валидация заказа**: проверка наличия булки перед оформлением
- **Адаптивный скролл**: для длинных списков ингредиентов с индикацией переполнения
- **Сохранение состояния**: для авторизованных пользователей
- **Таймер заказа**: отслеживание времени создания заказа
- **Визуальная обратная связь**: подсветка drop зон при перетаскивании
- **Типизированные элементы** - все элементы конструктора типизированы через `IConstructorIngredient` и `IDraggableConstructorItemProps`

### 5. Оформление заказов
- **Валидация конструктора**: проверка наличия всех необходимых ингредиентов
- **Асинхронное оформление**: отправка заказа на сервер с типизацией `IOrderState`
- **Генерация номера**: уникальный номер заказа
- **Модальное подтверждение**: отображение деталей заказа с типизацией `IOrderDetailsProps`
- **Обработка ошибок**: информирование о проблемах с заказом
- **Автоматическая очистка**: конструктор очищается после успешного заказа
- **Типизированные состояния** - все состояния заказа имеют строгую типизацию

### 6. Адаптивность и UX
- **Мобильные ограничения**: предупреждение для экранов < 1200px
- **Responsive дизайн**: адаптация под различные размеры экранов
- **Плавные анимации**: переходы и hover-эффекты
- **Лоадеры**: индикаторы загрузки для улучшения UX с типизацией `IBaseComponentProps`
- **Обработка ошибок**: информативные сообщения об ошибках
- **Восстановление формы**: сохранение данных при ошибках
- **Глобальные стили**: управление курсором при drag & drop
- **Страница 404**: обработка несуществующих маршрутов
- **Типизированные компоненты** - все UI компоненты имеют строгую типизацию

### 7. Модальные окна
- **Детали ингредиентов**: полная информация о выбранном ингредиенте с типизацией `IIngredient`
- **Подтверждение заказа**: номер и статус оформленного заказа
- **Закрытие по клику**: на оверлей или Escape с типизацией `IModalOverlayProps`
- **Переиспользуемость**: единый компонент для разных типов модальных окон
- **Управление состоянием**: через кастомный хук useModal с типизацией `IUseModalReturn`
- **Типизированные пропсы** - все модальные окна имеют строгую типизацию пропсов

### 8. TypeScript интеграция
- **Строгая типизация** - все функции и компоненты имеют четкие типы
- **Интерфейсы данных** - определены интерфейсы для всех структур данных
- **Generic компоненты** - переиспользуемые компоненты с generic типами
- **Типизированные хуки** - все кастомные хуки имеют строгую типизацию
- **API типизация** - все запросы и ответы API типизированы
- **Redux типизация** - полная типизация состояния и actions
- **Компонентная типизация** - все пропсы компонентов типизированы

## API интеграция

### Endpoints
- **Базовый URL**: `https://norma.nomoreparties.space/api`

#### Ингредиенты и заказы
- **Получение ингредиентов**: `GET /ingredients` - возвращает типизированный массив `IIngredient[]`
- **Создание заказа**: `POST /orders` - принимает массив ID ингредиентов, возвращает типизированный ответ `IOrderResponse`

#### Аутентификация
- **Регистрация**: `POST /auth/register` - принимает `TWithEmailPasswordAndName`, возвращает `IAuthResponse`
- **Авторизация**: `POST /auth/login` - принимает `TWithEmailAndPassword`, возвращает `IAuthResponse`
- **Выход из системы**: `POST /auth/logout` - принимает `ILogoutRequest`, возвращает `IBaseApiResponse`
- **Обновление токена**: `POST /auth/token` - принимает refresh токен, возвращает `ITokenResponse`
- **Получение данных пользователя**: `GET /auth/user` - возвращает `IUserResponse`
- **Обновление данных пользователя**: `PATCH /auth/user` - принимает `TWithOptionalPassword`, возвращает `IUserResponse`

#### Восстановление пароля
- **Запрос восстановления**: `POST /password-reset` - принимает `TEmailField`, возвращает `IBaseApiResponse`
- **Сброс пароля**: `POST /password-reset/reset` - принимает `IResetPasswordRequest`, возвращает `IBaseApiResponse`

### Обработка данных
- **Асинхронные запросы**: через redux-thunk с типизированными actions
- **Автоматическое обновление токенов**: при истечении access токена с типизацией `ITokenResponse`
- **Кэширование**: ингредиенты загружаются один раз при старте с типизацией `IIngredientsState`
- **Обработка ошибок**: централизованная обработка ошибок API с типизацией `IApiError`
- **JWT токены**: безопасная аутентификация с access и refresh токенами с типизацией `ITokens`
- **Заголовки авторизации**: автоматическое добавление токенов к запросам с типизацией `IAuthHeaders`
- **Утилиты токенов**: централизованное управление токенами в localStorage с типизацией `IAuthUtils`
- **Проверка ответов**: валидация ответов API перед обработкой с типизацией `IApiResponse<T>`
- **Типизированные запросы**: все HTTP запросы имеют строгую типизацию через `IRequestOptions`
- **Generic ответы**: API функции используют generic типы для типизации ответов

## UI/UX особенности

### Дизайн система
- **Компоненты Яндекс.Практикум**: единообразный дизайн
- **CSS Modules**: изолированные стили компонентов
- **Типографика**: система текстовых стилей
- **Цветовая схема**: консистентная палитра цветов

### Интерактивность
- **Hover эффекты**: визуальная обратная связь
- **Анимации**: плавные переходы между состояниями
- **Drag & Drop**: интуитивное взаимодействие
- **Модальные окна**: фокус на важной информации

## Производительность

### Оптимизации
- **React.memo**: предотвращение лишних перерисовок компонентов
- **useMemo**: мемоизация вычислений (расчет стоимости, фильтрация ингредиентов)
- **useCallback**: стабильные ссылки на функции (обработчики событий)
- **Ленивая загрузка**: компоненты загружаются по необходимости
- **Мемоизация селекторов**: оптимизация работы с Redux store
- **Оптимизированные хуки**: useModal и useForm с useCallback для стабильности ссылок
- **TypeScript оптимизации**: строгая типизация предотвращает ошибки во время выполнения
- **Generic компоненты**: переиспользуемые компоненты с типизацией для лучшей производительности
- **Типизированные селекторы**: оптимизированные селекторы Redux с типизацией
- **Мемоизированные вычисления**: все тяжелые вычисления мемоизированы с помощью useMemo

## Планы развития

### Реализованные функции ✅
- [x] **Система аутентификации** - полная реализация регистрации, авторизации и восстановления пароля
- [x] **Профиль пользователя** - управление данными профиля с валидацией
- [x] **Защищенные маршруты** - автоматические редиректы и контроль доступа
- [x] **JWT токены** - безопасная аутентификация с автоматическим обновлением
- [x] **Персистентность данных** - сохранение состояния между сессиями
- [x] **Интеграция с API** - полная интеграция с backend для всех функций
- [x] **TypeScript типизация** - полная типизация всех компонентов, функций и данных
- [x] **Строгая типизация Redux** - типизированные actions, reducers и store
- [x] **API типизация** - типизированные запросы и ответы API
- [x] **Компонентная типизация** - все React компоненты имеют строгую типизацию
- [x] **Generic типы** - переиспользуемые компоненты с generic типизацией
- [x] **Utility Types** - использование TypeScript utility types для комбинирования типов

### Краткосрочные задачи
- [ ] **История заказов** - реализация просмотра предыдущих заказов пользователя
- [ ] **Лента заказов** - общая лента заказов всех пользователей
- [ ] **Система уведомлений** - уведомления о статусе заказов

### Среднесрочные задачи
- [ ] **Расширенная аналитика** - статистика заказов и популярных ингредиентов
- [ ] **Административная панель** - управление ингредиентами и заказами

## Контакты для связи

- **Почта** – chertchill@yandex.ru
- **Telegram** – https://telegram.me/chert_chill
