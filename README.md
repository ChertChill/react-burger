# React Burger

Интерактивное веб-приложение для создания кастомных бургеров с полной системой аутентификации, drag & drop конструктором и интеграцией с API.

## Содержание

- [Описание проекта](#описание-проекта)
- [Технологии](#технологии)
- [Структура проекта](#структура-проекта)
- [Архитектура приложения](#архитектура-приложения)
- [Установка и запуск](#установка-и-запуск)
- [Основные функции](#основные-функции)
- [API интеграция](#api-интеграция)
- [UI/UX особенности](#uiux-особенности)
- [Производительность](#производительность)
- [Планы развития](#планы-развития)
- [Контакты для связи](#контакты-для-связи)

## Описание проекта

React Burger - это полнофункциональное веб-приложение, построенное на React, которое позволяет пользователям:

- **Регистрироваться и авторизовываться** с полной системой аутентификации
- **Управлять профилем** - редактировать данные и просматривать историю
- **Просматривать каталог ингредиентов** (булки, соусы, начинки) с детальной информацией
- **Собирать собственные бургеры** путем перетаскивания ингредиентов
- **Оформлять заказы** с генерацией номера заказа и подтверждением
- **Восстанавливать пароль** через email с полным циклом восстановления
- **Наслаждаться адаптивным интерфейсом** с поддержкой различных устройств
- **Сохранять состояние** между сессиями для авторизованных пользователей

## Технологии

### Основные технологии
- **React 19.1.1** - основная библиотека для построения пользовательского интерфейса
- **TypeScript 4.9.5** - типизированный JavaScript для улучшения разработки
- **CSS Modules** - для изолированной стилизации компонентов
- **@ya.praktikum/react-developer-burger-ui-components** - UI компоненты от Яндекс.Практикум

### Управление состоянием
- **Redux 5.0.1** - централизованное управление состоянием приложения
- **@reduxjs/toolkit 2.8.2** - современный инструментарий для работы с Redux
- **react-redux 9.2.0** - интеграция Redux с React
- **redux-thunk 3.1.0** - middleware для асинхронных действий

### Маршрутизация
- **react-router-dom 7.8.2** - маршрутизация и навигация в приложении

### Drag & Drop функциональность
- **react-dnd 16.0.1** - библиотека для реализации drag & drop
- **react-dnd-html5-backend 16.0.1** - HTML5 backend для react-dnd

### Валидация и типизация
- **uuid 11.1.0** - генерация уникальных идентификаторов

### Инструменты разработки
- **react-scripts 5.0.1** - скрипты для Create React App
- **web-vitals 2.1.4** - метрики производительности веб-приложений

## Структура проекта

```
src/
├── components/                     # React компоненты
│   ├── app/                        # Главный компонент приложения
│   │   ├── app.jsx                 # Основная логика приложения
│   │   └── app.module.css          # Стили главного компонента
│   ├── app-header/                 # Шапка приложения с навигацией
│   │   ├── app-header.jsx          # Компонент шапки
│   │   └── app-header.module.css
│   ├── burger-constructor/         # Конструктор бургеров
│   │   ├── burger-constructor.jsx
│   │   ├── burger-constructor.module.css
│   │   └── draggable-constructor-item.jsx
│   ├── burger-ingredients/         # Каталог ингредиентов
│   │   ├── burger-ingredients.jsx
│   │   └── burger-ingredients.module.css
│   ├── category-block/             # Блок категории ингредиентов
│   │   ├── category-block.jsx
│   │   └── category-block.module.css
│   ├── category-item/              # Элемент категории
│   │   ├── category-item.jsx
│   │   └── category-item.module.css
│   ├── ingredient-details/         # Детали ингредиента
│   │   ├── ingredient-details.jsx
│   │   └── ingredient-details.module.css
│   ├── loader/                     # Компонент загрузки
│   │   ├── loader.jsx
│   │   └── loader.module.css
│   ├── mobile-restriction/         # Ограничение для мобильных устройств
│   │   ├── mobile-restriction.jsx
│   │   └── mobile-restriction.module.css
│   ├── modal/                      # Модальные окна
│   │   ├── modal.jsx
│   │   └── modal.module.css
│   ├── modal-overlay/              # Оверлей для модальных окон
│   │   ├── modal-overlay.jsx
│   │   └── modal-overlay.module.css
│   ├── nutrition-item/             # Элемент информации о питательности
│   │   ├── nutrition-item.jsx
│   │   └── nutrition-item.module.css
│   ├── order-details/              # Детали заказа
│   │   ├── order-details.jsx
│   │   └── order-details.module.css
│   └── protected-route/            # Компонент защищенных маршрутов
│       └── protected-route.jsx
├── hooks/                          # Кастомные React хуки
│   ├── index.js                    # Центральный экспорт хуков
│   ├── useModal.js                 # Хук для управления модальными окнами
│   └── useForm.js                  # Хук для управления состоянием форм
├── images/                         # Статические изображения
│   └── order-status.png            # Изображение статуса заказа
├── pages/                          # Страницы приложения
│   ├── auth/                       # Страницы аутентификации
│   │   ├── auth.module.css         # Общие стили для auth страниц
│   │   ├── forgot-password.jsx    # Восстановление пароля
│   │   ├── login.jsx               # Авторизация
│   │   ├── register.jsx            # Регистрация
│   │   └── reset-password.jsx      # Сброс пароля
│   ├── home.jsx                    # Главная страница
│   ├── ingredient-details/         # Страница деталей ингредиента
│   │   ├── ingredient-details.jsx
│   │   └── ingredient-details.module.css
│   ├── not-found/                  # Страница 404
│   │   ├── not-found.jsx
│   │   └── not-found.module.css
│   └── profile/                    # Профиль пользователя
│       ├── profile.jsx             # Главная страница профиля
│       ├── profile.module.css      # Стили профиля
│       ├── orders-history/         # История заказов
│       │   ├── orders-history.jsx
│       │   └── orders-history.module.css
│       ├── profile-info/           # Информация профиля
│       │   ├── profile-info.jsx
│       │   └── profile-info.module.css
│       └── profile-navigation/    # Навигация профиля
│           ├── profile-navigation.jsx
│           └── profile-navigation.module.css
├── services/                       # Redux логика
│   ├── actions/                    # Redux actions
│   │   ├── action-types.js         # Типы действий
│   │   ├── auth-actions.js         # Действия аутентификации
│   │   ├── constructor-actions.js
│   │   ├── ingredient-details-actions.js
│   │   ├── ingredients-actions.js
│   │   ├── order-actions.js
│   │   └── index.js                # Центральный экспорт actions
│   ├── reducers/                   # Redux reducers
│   │   ├── auth-reducer.js         # Reducer аутентификации
│   │   ├── constructor-reducer.js
│   │   ├── ingredient-details-reducer.js
│   │   ├── ingredients-reducer.js
│   │   ├── order-reducer.js
│   │   └── root-reducer.js         # Корневой reducer
│   └── store/                      # Redux store
│       └── store.js                # Конфигурация store
├── utils/                          # Утилиты и константы
│   ├── api.js                      # API функции
│   ├── checkResponse.js            # Утилита для проверки ответов API
│   ├── constants.js                # Константы приложения
│   ├── getErrorText.js             # Утилита для обработки ошибок
│   ├── tokenUtils.js               # Утилиты для работы с токенами
├── index.css                       # Глобальные стили
├── index.tsx                       # Точка входа приложения
├── react-app-env.d.ts              # TypeScript декларации
├── reportWebVitals.ts              # Метрики производительности
└── setupTests.ts                   # Настройка тестов
```

## Архитектура приложения

### Redux Store Structure
Приложение использует Redux для управления состоянием с пятью основными slice'ами:

- **ingredients** - управление данными об ингредиентах
- **constructor** - управление состоянием конструктора бургера
- **ingredientDetails** - управление деталями ингредиента в модальном окне
- **order** - управление состоянием заказа
- **auth** - управление состоянием аутентификации пользователя

### Система аутентификации
- **JWT токены** - access и refresh токены для безопасной аутентификации
- **Автоматическое обновление токенов** - refresh токен обновляется автоматически
- **Защищенные маршруты** - компонент ProtectedRoute для контроля доступа
- **Персистентность сессии** - сохранение состояния авторизации в localStorage
- **Восстановление пароля** - полный цикл восстановления пароля через email

### Маршрутизация
- **React Router v7** - современная система маршрутизации
- **Вложенные маршруты** - для профиля пользователя и деталей ингредиентов
- **Программная навигация** - с сохранением состояния для возврата после авторизации
- **Защищенные маршруты** - автоматические редиректы для неавторизованных пользователей

### Кастомные хуки
- **useModal** - хук для управления модальными окнами с оптимизированными функциями
- **useForm** - хук для управления состоянием форм с валидацией и сбросом

### Drag & Drop система
Реализована с помощью react-dnd:
- **Drag источники** в компонентах ингредиентов для перетаскивания
- **Drop зоны** в конструкторе бургера для размещения ингредиентов
- **Раздельная обработка** для булок и начинок с разными типами drop
- **Переупорядочивание** ингредиентов внутри конструктора
- **Визуальная обратная связь** при перетаскивании
- **Сохранение состояния** конструктора для авторизованных пользователей

## Установка и запуск

### Предварительные требования

- Node.js (версия 14 или выше)
- npm или yarn

### Установка зависимостей

```bash
npm install
```

### Запуск в режиме разработки

```bash
npm start
```

Приложение будет доступно по адресу [http://localhost:3000](http://localhost:3000)

### Сборка для продакшена

```bash
npm run build
```

## Основные функции

### 1. Система аутентификации
- **Регистрация пользователей** - создание нового аккаунта с валидацией данных
- **Авторизация** - вход в систему с проверкой учетных данных
- **Восстановление пароля** - полный цикл восстановления через email с токенами
- **Автоматическое обновление токенов** - seamless обновление access токенов через refresh токен
- **Защищенные маршруты** - автоматические редиректы для неавторизованных пользователей
- **Персистентность сессии** - сохранение состояния авторизации между сессиями
- **JWT токены** - безопасная аутентификация с access и refresh токенами
- **Автоматическая очистка** - удаление данных при выходе из системы

### 2. Профиль пользователя
- **Управление данными профиля** - редактирование имени, email и пароля
- **История заказов** - просмотр предыдущих заказов (в разработке)
- **Навигация профиля** - удобная навигация между разделами профиля
- **Валидация форм** - проверка корректности вводимых данных
- **Автосохранение изменений** - отслеживание изменений в профиле

### 3. Каталог ингредиентов
- **Отображение по категориям**: булки, соусы, начинки
- **Интерактивные табы**: быстрая навигация между категориями
- **Автоматическое переключение**: активный таб меняется при скролле
- **Плавная прокрутка**: к выбранной категории при клике на таб
- **Модальные окна**: детальная информация об ингредиентах
- **Drag источники**: возможность перетаскивания ингредиентов
- **Страница деталей**: отдельная страница для каждого ингредиента

### 4. Конструктор бургеров
- **Drag & Drop функциональность**: добавление ингредиентов перетаскиванием
- **Визуальное отображение**: собранный бургер в реальном времени
- **Автоматический расчет стоимости**: обновление цены при изменении состава
- **Управление ингредиентами**: удаление отдельных элементов
- **Переупорядочивание**: изменение порядка ингредиентов внутри конструктора
- **Валидация заказа**: проверка наличия булки перед оформлением
- **Адаптивный скролл**: для длинных списков ингредиентов с индикацией переполнения
- **Сохранение состояния**: для авторизованных пользователей
- **Таймер заказа**: отслеживание времени создания заказа
- **Визуальная обратная связь**: подсветка drop зон при перетаскивании

### 5. Оформление заказов
- **Валидация конструктора**: проверка наличия всех необходимых ингредиентов
- **Асинхронное оформление**: отправка заказа на сервер
- **Генерация номера**: уникальный номер заказа
- **Модальное подтверждение**: отображение деталей заказа
- **Обработка ошибок**: информирование о проблемах с заказом
- **Автоматическая очистка**: конструктор очищается после успешного заказа

### 6. Адаптивность и UX
- **Мобильные ограничения**: предупреждение для экранов < 1200px
- **Responsive дизайн**: адаптация под различные размеры экранов
- **Плавные анимации**: переходы и hover-эффекты
- **Лоадеры**: индикаторы загрузки для улучшения UX
- **Обработка ошибок**: информативные сообщения об ошибках
- **Восстановление формы**: сохранение данных при ошибках
- **Глобальные стили**: управление курсором при drag & drop
- **Страница 404**: обработка несуществующих маршрутов

### 7. Модальные окна
- **Детали ингредиентов**: полная информация о выбранном ингредиенте
- **Подтверждение заказа**: номер и статус оформленного заказа
- **Закрытие по клику**: на оверлей или Escape
- **Переиспользуемость**: единый компонент для разных типов модальных окон
- **Управление состоянием**: через кастомный хук useModal

## API интеграция

### Endpoints
- **Базовый URL**: `https://norma.nomoreparties.space/api`

#### Ингредиенты и заказы
- **Получение ингредиентов**: `GET /ingredients`
- **Создание заказа**: `POST /orders`

#### Аутентификация
- **Регистрация**: `POST /auth/register`
- **Авторизация**: `POST /auth/login`
- **Выход из системы**: `POST /auth/logout`
- **Обновление токена**: `POST /auth/token`
- **Получение данных пользователя**: `GET /auth/user`
- **Обновление данных пользователя**: `PATCH /auth/user`

#### Восстановление пароля
- **Запрос восстановления**: `POST /password-reset`
- **Сброс пароля**: `POST /password-reset/reset`

### Обработка данных
- **Асинхронные запросы**: через redux-thunk
- **Автоматическое обновление токенов**: при истечении access токена
- **Кэширование**: ингредиенты загружаются один раз при старте
- **Обработка ошибок**: централизованная обработка ошибок API
- **JWT токены**: безопасная аутентификация с access и refresh токенами
- **Заголовки авторизации**: автоматическое добавление токенов к запросам
- **Утилиты токенов**: централизованное управление токенами в localStorage
- **Проверка ответов**: валидация ответов API перед обработкой

## UI/UX особенности

### Дизайн система
- **Компоненты Яндекс.Практикум**: единообразный дизайн
- **CSS Modules**: изолированные стили компонентов
- **Типографика**: система текстовых стилей
- **Цветовая схема**: консистентная палитра цветов

### Интерактивность
- **Hover эффекты**: визуальная обратная связь
- **Анимации**: плавные переходы между состояниями
- **Drag & Drop**: интуитивное взаимодействие
- **Модальные окна**: фокус на важной информации

## Производительность

### Оптимизации
- **React.memo**: предотвращение лишних перерисовок
- **useMemo**: мемоизация вычислений (расчет стоимости, фильтрация ингредиентов)
- **useCallback**: стабильные ссылки на функции (обработчики событий)
- **Ленивая загрузка**: компоненты загружаются по необходимости
- **Мемоизация селекторов**: оптимизация работы с Redux store
- **Оптимизированные хуки**: useModal и useForm с useCallback

## Планы развития

### Реализованные функции ✅
- [x] **Система аутентификации** - полная реализация регистрации, авторизации и восстановления пароля
- [x] **Профиль пользователя** - управление данными профиля с валидацией
- [x] **Защищенные маршруты** - автоматические редиректы и контроль доступа
- [x] **JWT токены** - безопасная аутентификация с автоматическим обновлением
- [x] **Персистентность данных** - сохранение состояния между сессиями
- [x] **Интеграция с API** - полная интеграция с backend для всех функций

### Краткосрочные задачи
- [ ] **История заказов** - реализация просмотра предыдущих заказов пользователя
- [ ] **Лента заказов** - общая лента заказов всех пользователей
- [ ] **Система уведомлений** - уведомления о статусе заказов

### Среднесрочные задачи
- [ ] **Расширенная аналитика** - статистика заказов и популярных ингредиентов
- [ ] **Административная панель** - управление ингредиентами и заказами

## Контакты для связи

- **Почта** – chertchill@yandex.ru
- **Telegram** – https://telegram.me/chert_chill
